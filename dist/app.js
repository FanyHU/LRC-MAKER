!function(e){function t(a){if(n[a])return n[a].exports;var r=n[a]={i:a,l:!1,exports:{}};return e[a].call(r.exports,r,r.exports,t),r.l=!0,r.exports}var n={};t.m=e,t.c=n,t.i=function(e){return e},t.d=function(e,n,a){t.o(e,n)||Object.defineProperty(e,n,{configurable:!1,enumerable:!0,get:a})},t.n=function(e){var n=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(n,"a",n),n},t.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t.p="",t(t.s=13)}([function(e,t){e.exports=window.React},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=function(){function e(e,t){var n=[],a=!0,r=!1,o=void 0;try{for(var i,l=e[Symbol.iterator]();!(a=(i=l.next()).done)&&(n.push(i.value),!t||n.length!==t);a=!0);}catch(e){r=!0,o=e}finally{try{!a&&l.return&&l.return()}finally{if(r)throw o}}return n}return function(t,n){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return e(t,n);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),r={parse:function(e){var t=e.split(/\r\n|[\r\n]/),n=[],r=void 0,o=void 0,i=void 0,l=/(\[.*])(.*)/,u=!0,c=!1,s=void 0;try{for(var d,f=t[Symbol.iterator]();!(u=(d=f.next()).done);u=!0){var p=d.value,m=l.exec(p);if(null===m)n.push({text:p.trim()});else{var h=a(m,3),v=(h[0],h[1]),y=h[2],g=v.match(/\[\d{1,2}:\d{1,2}([:.]\d{1,3})?]/g);if(null===g){var b=v.match(/\[ar:(.*)]/);null!==b&&(r=b[1]);var w=v.match(/\[ti:(.*)]/);null!==w&&(o=w[1]);var k=v.match(/\[al:(.*)]/);null!==k&&(i=k[1])}else{var E=!0,x=!1,S=void 0;try{for(var _,T=g[Symbol.iterator]();!(E=(_=T.next()).done);E=!0){var M=_.value,N=M.match(/\[(.*?):(.*)]/),C=a(N,3),A=(C[0],C[1]),R=C[2];R=R.replace(/:/,".");var O=[parseInt(A),parseFloat(R)];A=O[0],R=O[1],n.push({time:60*A+R,text:y.trim()})}}catch(e){x=!0,S=e}finally{try{!E&&T.return&&T.return()}finally{if(x)throw S}}}}}}catch(e){c=!0,s=e}finally{try{!u&&f.return&&f.return()}finally{if(c)throw s}}var j=[0,n.length],L=j[0],I=j[1];for(n.every(function(e){return void 0!==e.time})&&n.sort(function(e,t){return e.time<=t.time?-1:1});L<I;++L)n[L].key=L;return{ar:r,ti:o,al:i,lyric:n,new_key:I}},timeToTag:function(e){var t=Math.floor(e/60);t=isNaN(t)?"--":t>=10?t:"0"+t;var n=Math.floor(e%60);n=isNaN(n)?"--":n>=10?n:"0"+n;var a=(1e3*(e-60*t-n)).toFixed(0);return a=isNaN(a)?"--":a>=100?a:a>=10?"0"+a:"00"+a,"["+t+":"+n+"."+a+"]"},stringify:function(e){var t=["[tool:灯里的歌词滚动姬]"];e.ar&&t.push("[ar:"+e.ar+"]"),e.ti&&t.push("[ti:"+e.ti+"]"),e.al&&t.push("[ar:"+e.al+"]"),e.lyric.every(function(e){return void 0!==e.time})&&e.lyric.sort(function(e,t){return e.time<=t.time?-1:1});var n=!0,a=!1,r=void 0;try{for(var o,i=e.lyric[Symbol.iterator]();!(n=(o=i.next()).done);n=!0){var l=o.value;void 0===l.time?t.push(l.text):t.push(this.timeToTag(l.time)+" "+l.text)}}catch(e){a=!0,r=e}finally{try{!n&&i.return&&i.return()}finally{if(a)throw r}}return t.join("\r\n")}};t.default=r},function(e,t){},function(e,t){},function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var l=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),u=n(0),c=a(u),s=n(12),d=a(s),f=n(11),p=a(f),m=n(10),h=a(m),v=n(8),y=a(v),g=n(9),b=a(g),w=n(1),k=a(w),E=n(6),x=a(E),S=n(7),_=a(S),T=[.25,.5,.66,.8,1,1.25,1.5,2,4],M=function(e){function t(e){r(this,t);var n=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e)),a=void 0;try{localStorage&&(a=JSON.parse(localStorage.getItem("app-state")))}catch(e){}var i=a||{editing:!0,showTimestamp:!0,selectedIndex:0,highlightIndex:-1,elapsedTime:0,showMask:!1,showAside:!1,dragging:!1,checkMode:!1,showAbout:!1,showSyncButton:!1};return n.state=i,n}return i(t,e),l(t,[{key:"componentDidMount",value:function(){var e=this,t=/(^|\?|&)audiosrc=(.*)(&|$)/.exec(location.search);t&&this.setState({audioSrc:t[2]}),_.default.bind("?",function(t){return e.setState({showMask:!0,showAside:!1,showAbout:!0})}),_.default.bind(["up","w","j"],function(t){return e.changeSelectedIndex(e.state.selectedIndex-1),t.preventDefault(),!1}),_.default.bind(["down","s","k"],function(t){return e.changeSelectedIndex(e.state.selectedIndex+1),t.preventDefault(),!1}),_.default.bind("space",function(t){return e.syncLRC(),t.preventDefault(),!1}),_.default.bind(["command+backspace","delete"],function(t){return e.deleteTimestamp(),t.preventDefault(),!1}),_.default.bind(["command+return","ctrl+enter"],function(t){return e.audio.paused?e.audio.play():e.audio.pause()}),_.default.bind(["left","a"],function(t){return e.audio.currentTime-=5}),_.default.bind(["right","d"],function(t){return e.audio.currentTime+=5}),_.default.bind(["command+up","ctrl+up"],function(t){return e.speedup(),t.preventDefault(),!1}),_.default.bind(["command+down","ctrl+down"],function(t){return e.speeddown(),t.preventDefault(),!1}),_.default.bind("r",function(t){return e.audio.playbackRate=1}),document.addEventListener("visibilitychange",function(){document.hidden&&(e.audio.pause(),e.saveAppState())},!1),window.onbeforeunload=function(){e.saveAppState()}}},{key:"speedup",value:function(){var e=this;void 0!==this.audio&&(this.audio.playbackRate=T.find(function(t){return t>e.audio.playbackRate})||T[T.length-1])}},{key:"speeddown",value:function(){var e=this;void 0!==this.audio&&(this.audio.playbackRate=T.filter(function(t){return t<e.audio.playbackRate}).reverse()[0]||T[0])}},{key:"changeSelectedIndex",value:function(e){var t=this;if(this.state.lyric){var n=this.state.lyric.length-1;e<0&&(e=0),e>n&&(e=n),this.setState({selectedIndex:e},function(){if(!0===t.audio.paused||0==t.state.checkMode){var e=document.querySelector(".select");!t.audio.paused&&t.state.checkMode||window.scrollBy(0,e.getBoundingClientRect().bottom-document.documentElement.clientHeight/2)}})}}},{key:"updateTime",value:function(){var e=this.audio.currentTime,t=this.state.lyric,n=t&&t.filter(function(t){return void 0!==t.time&&t.time<e}).sort(function(e,t){return e.time<t.time?1:-1}),a=n[0],r=a?a.key:-1;if(this.state.highlightIndex!==r&&1==this.state.checkMode){var o=document.querySelector(".highlight");if(o){var i=1e3;n.length>1&&(i=250*(n[0].time-n[1].time)),(0,x.default)(o,{duration:i,offset:2*o.getBoundingClientRect().height-document.documentElement.clientHeight/2})}}this.setState({elapsedTime:e,highlightIndex:r})}},{key:"syncLRC",value:function(){var e=this,t=this.audio.currentTime;this.setState({lyric:this.state.lyric.map(function(n,a){return a==e.state.selectedIndex?{key:n.key,text:n.text,time:t}:n})}),this.changeSelectedIndex(this.state.selectedIndex+1)}},{key:"deleteTimestamp",value:function(){var e=this;this.setState({lyric:this.state.lyric.map(function(t,n){return n==e.state.selectedIndex?{key:t.key,text:t.text,time:void 0}:t})})}},{key:"clearAllTimestamp",value:function(){this.setState({lyric:this.state.lyric.map(function(e,t){return{key:e.key,text:e.text,time:void 0}})})}},{key:"onDragEnter",value:function(e){this.setState({dragging:!0}),e.preventDefault()}},{key:"onDragLeave",value:function(e){this.setState({dragging:!1}),e.preventDefault()}},{key:"onDragOver",value:function(e){e.dataTransfer.dropEffect="copy",e.preventDefault()}},{key:"loadFiles",value:function(e){for(var t=this,n=!1,a=!1,r=0;r<e.length;r++)if(n||!/^audio\//.test(e[r].type))if(a){if(n&&a)break}else{var o=new FileReader;o.onload=function(e){var n=e.target.result;t.setState({dragging:!0},function(){return t.setState({lyricText:n,dragging:!1,editing:!0})})},o.readAsText(e[r]),a=!0}else{URL.revokeObjectURL(this.state.audioSrc);var i=URL.createObjectURL(e[r]);this.setState({audioSrc:i,dragging:!1}),n=!0}}},{key:"onDrop",value:function(e){e.preventDefault(),e.stopPropagation();var t=e.dataTransfer.files;return this.loadFiles(t),!1}},{key:"saveAppState",value:function(){localStorage.setItem("app-state",JSON.stringify({editing:this.state.editing,showTimestamp:this.state.showTimestamp,showSyncButton:this.state.showSyncButton,checkMode:this.state.checkMode,selectedIndex:0,highlightIndex:-1,elapsedTime:0,showMask:!1,audioSrc:void 0,dragging:!1,lyric:this.state.lyric,lyricText:this.state.lyricText,al:this.state.al,ti:this.state.ti,ar:this.state.ar}))}},{key:"render",value:function(){var e=this;return c.default.createElement("div",{className:"app-root",onDragEnter:function(t){return e.onDragEnter(t)},onDragLeave:function(t){return e.onDragLeave(t)},onDragOver:function(t){return e.onDragOver(t)},onDrop:function(t){return e.onDrop(t)}},c.default.createElement(d.default,{showSlide:function(){return e.setState({showMask:!0,showAside:!0})}}),c.default.createElement("main",{id:"app-main",className:"app-main wrapper"},this.state.dragging?c.default.createElement(b.default,null):this.state.editing?c.default.createElement(h.default,{lyricText:this.state.lyricText||"",onChangeFocus:function(t){return e.setState({textareaFocused:t})},onParse:function(t){return e.setState(k.default.parse(t),function(){return e.setState({editing:!1})})}}):c.default.createElement(y.default,{showTimestamp:this.state.showTimestamp,showSyncButton:this.state.showSyncButton,lyric:this.state.lyric,selectedIndex:this.state.selectedIndex,highlightIndex:this.state.highlightIndex,elapsedTime:this.state.elapsedTime,onChangeSelectedIndex:function(t){return e.changeSelectedIndex(t)},onSyncLrcLRC:function(){return e.syncLRC()},onDeleteTimestamp:function(){return e.deleteTimestamp()},onClearAlleTimestamp:function(){return e.clearAllTimestamp()},onOutput:function(){return e.setState({lyricText:k.default.stringify({lyric:e.state.lyric,al:e.state.al,ti:e.state.ti,ar:e.state.ar}),editing:!0},function(){return e.saveAppState()})}})),c.default.createElement(p.default,{textareaFocused:this.state.textareaFocused,audioSrc:this.state.audioSrc,setAudio:function(t){return e.audio=t},updateTime:function(){return e.updateTime()},showTimestamp:this.state.showTimestamp,playbackRate:this.audio?this.audio.playbackRate:1,checkMode:this.state.checkMode}),c.default.createElement("aside",{className:"app-aside"+(this.state.showAside?" is-visible":"")},c.default.createElement("ul",null,c.default.createElement("li",{className:"app-aside-li"},c.default.createElement("button",{className:"app-aside-button",onClick:function(){return e.setState({showTimestamp:!e.state.showTimestamp})}},this.state.showTimestamp?"隐藏时间轴":"显示时间轴")),c.default.createElement("li",{className:"app-aside-li"},c.default.createElement("button",{className:"app-aside-button",onClick:function(){return e.setState({checkMode:!e.state.checkMode})}},this.state.checkMode?"切换到打轴模式":"切换到校对模式")),c.default.createElement("li",{className:"app-aside-li"},c.default.createElement("button",{className:"app-aside-button",onClick:function(){return e.setState({showSyncButton:!e.state.showSyncButton})}},this.state.showSyncButton?"隐藏虚拟按键":"显示虚拟按键")),c.default.createElement("li",{className:"app-aside-li"},c.default.createElement("label",{htmlFor:"upLoadFile",className:"app-aside-button"},"导入本地音频&歌词文本"),c.default.createElement("input",{className:"upLoadFile",id:"upLoadFile",type:"file",multiple:!0,accept:"audio/* , text/*",onChange:function(t){var n=t.target.files;e.loadFiles(n),e.setState({showMask:!1,showAside:!1})}})),c.default.createElement("li",{className:"app-aside-li"},c.default.createElement("button",{className:"app-aside-button",onClick:function(){var t=prompt("请输入外源音频");t&&e.setState({audioSrc:t,showMask:!1,showAside:!1})}},"拉取外源音频")),c.default.createElement("li",{className:"app-aside-li"},c.default.createElement("button",{className:"app-aside-button",onClick:function(){return e.setState({showAbout:!0,showMask:!0,showAside:!1})}},"帮助 / 关于")))),c.default.createElement("div",{className:"mask "+(this.state.showMask?"is-visible":""),onClick:function(){return e.setState({showMask:!1,showAside:!1,showAbout:!1})}}),c.default.createElement("div",{className:"help-and-about-box modal "+(this.state.showAbout?"is-visible":"")},c.default.createElement("div",{className:"modal-inner"},c.default.createElement("section",{className:"help-and-about-section"},c.default.createElement("h1",null,"快捷键"),c.default.createElement("p",null,"播放／暂停：",c.default.createElement("kbd",null,"command + return / ctrl + enter")),c.default.createElement("p",null,"打轴：",c.default.createElement("kbd",null,"space")),c.default.createElement("p",null,"删除时间轴：",c.default.createElement("kbd",null,"command + delete / delete")),c.default.createElement("p",null,"前进5秒：",c.default.createElement("kbd",null," ➡️️ / d")),c.default.createElement("p",null,"后退5秒：",c.default.createElement("kbd",null," ⬅️️ / a")),c.default.createElement("p",null,"选择上 & 下行歌词：",c.default.createElement("kbd",null,"⬆️ & ⬇️ / w & s / j & k")),c.default.createElement("p",null,"加速播放：",c.default.createElement("kbd",null,"command + ⬆️ / ctrl + ⬆️ ")),c.default.createElement("p",null,"减速播放：",c.default.createElement("kbd",null,"command + ⬇️ /ctrl + ⬇️ ️")),c.default.createElement("p",null,"重置速度：",c.default.createElement("kbd",null,"r")),c.default.createElement("p",null,"显示帮助：",c.default.createElement("kbd",null,"shift + ?"))),c.default.createElement("section",null,c.default.createElement("h1",null,"使用提示"),c.default.createElement("p",null,"先导入歌词和音频，歌词支持直接输入、拖放、上传的方式导入。"),c.default.createElement("p",null,"音频支持拖放、上传、输入外源地址的方式导入。"),c.default.createElement("p",null,"导入的歌词支持纯文本，也支持时间轴解析，所以即使导入编辑到一半的歌词也是支持的。"),c.default.createElement("p",null,"因此在打轴过程中，可以随时再切换到编辑(导出)模式编辑。"),c.default.createElement("h3",{style:{color:"gray",opacity:.8}},"关于如何引用云音乐的音频"),c.default.createElement("p",{style:{color:"gray",opacity:.8}},"将这个链接"," ",c.default.createElement("a",{href:"javascript:void(function(u,s)%7Bs=document.body.appendChild(document.createElement('script'));s.src=u+'?ts='+Date.now();s.charset='UTF-8'%7D('//hufan-akari.github.io/LRC-MAKER/user_tool/gotolrcmaker.js'))"},"跳转至歌词编辑页面"),"拖动至/保存至收藏夹，并在单曲页面使用。"),c.default.createElement("a",{href:"https://cloud.githubusercontent.com/assets/7829098/24322142/9a9607e4-1198-11e7-9610-e633bae10ed0.gif",target:"_blank",rel:"nofollow noopener noreferre"},"点查看使用演示")),c.default.createElement("section",null,c.default.createElement("h1",null,"关于本工具"),c.default.createElement("p",null,"本工具是使用 React 和 HTML5技术制作成的纯前端APP"),c.default.createElement("p",null,"由",c.default.createElement("a",{href:"http://music.163.com/user/home?id=45441555",target:"_blank",rel:"nofollow noopener noreferrer me"},"阿卡林"),"带着 ❤️ 制作而成。"),c.default.createElement("p",null,c.default.createElement("a",{href:"http://music.163.com/user/home?id=45441555",target:"_blank",rel:"nofollow noopener noreferrer me"},"阿卡林"),"是网易云音乐的忠实用户，仅此而已。"),c.default.createElement("p",null,"使用本工具所遇到的问题，请向",c.default.createElement("a",{href:"https://github.com/hufan-Akari/LRC-MAKER/issues/new",target:"_blank",rel:"nofollow noopener noreferre"},"这里"),"求助。"),c.default.createElement("p",null,"欢迎 star,fork,pull request"," ",c.default.createElement("a",{href:"https://github.com/hufan-Akari/LRC-MAKER",target:"_blank",rel:"noopener"},"本项目"))))))}}]),t}(u.Component);t.default=M},function(e,t){e.exports=window.ReactDOM},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=function(e,t,n,a){return(e/=a/2)<1?n/2*e*e+t:(e--,-n/2*(e*(e-2)-1)+t)},r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},o=function(){function e(){return window.scrollY||window.pageYOffset}function t(e){return e.getBoundingClientRect().top+u}function n(e){h||(h=e),v=e-h,y=d(v,u,p,m),window.scrollTo(0,y),v<m?window.requestAnimationFrame(n):o()}function o(){window.scrollTo(0,u+p),l&&f&&(l.setAttribute("tabindex","-1"),l.focus()),"function"==typeof g&&g(),h=!1}function i(o){var i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};switch(m=i.duration||1e3,s=i.offset||0,g=i.callback,d=i.easing||a,f=i.a11y||!1,u=e(),void 0===o?"undefined":r(o)){case"number":l=void 0,f=!1,c=u+o;break;case"object":l=o,c=t(l);break;case"string":l=document.querySelector(o),c=t(l)}switch(p=c-u+s,r(i.duration)){case"number":m=i.duration;break;case"function":m=i.duration(p)}window.requestAnimationFrame(n)}var l=void 0,u=void 0,c=void 0,s=void 0,d=void 0,f=void 0,p=void 0,m=void 0,h=void 0,v=void 0,y=void 0,g=void 0;return i}();t.default=o},function(e,t,n){var a;!function(r,o,i){function l(e,t,n){if(e.addEventListener)return void e.addEventListener(t,n,!1);e.attachEvent("on"+t,n)}function u(e){if("keypress"==e.type){var t=String.fromCharCode(e.which);return e.shiftKey||(t=t.toLowerCase()),t}return k[e.which]?k[e.which]:E[e.which]?E[e.which]:String.fromCharCode(e.which).toLowerCase()}function c(e,t){return e.sort().join(",")===t.sort().join(",")}function s(e){var t=[];return e.shiftKey&&t.push("shift"),e.altKey&&t.push("alt"),e.ctrlKey&&t.push("ctrl"),e.metaKey&&t.push("meta"),t}function d(e){if(e.preventDefault)return void e.preventDefault();e.returnValue=!1}function f(e){if(e.stopPropagation)return void e.stopPropagation();e.cancelBubble=!0}function p(e){return"shift"==e||"ctrl"==e||"alt"==e||"meta"==e}function m(){if(!w){w={};for(var e in k)e>95&&e<112||k.hasOwnProperty(e)&&(w[k[e]]=e)}return w}function h(e,t,n){return n||(n=m()[e]?"keydown":"keypress"),"keypress"==n&&t.length&&(n="keydown"),n}function v(e){return"+"===e?["+"]:(e=e.replace(/\+{2}/g,"+plus"),e.split("+"))}function y(e,t){var n,a,r,o=[];for(n=v(e),r=0;r<n.length;++r)a=n[r],S[a]&&(a=S[a]),t&&"keypress"!=t&&x[a]&&(a=x[a],o.push("shift")),p(a)&&o.push(a);return t=h(a,o,t),{key:a,modifiers:o,action:t}}function g(e,t){return null!==e&&e!==o&&(e===t||g(e.parentNode,t))}function b(e){function t(e){e=e||{};var t,n=!1;for(t in w)e[t]?n=!0:w[t]=0;n||(x=!1)}function n(e,t,n,a,r,o){var i,l,u=[],s=n.type;if(!v._callbacks[e])return[];for("keyup"==s&&p(e)&&(t=[e]),i=0;i<v._callbacks[e].length;++i)if(l=v._callbacks[e][i],(a||!l.seq||w[l.seq]==l.level)&&s==l.action&&("keypress"==s&&!n.metaKey&&!n.ctrlKey||c(t,l.modifiers))){var d=!a&&l.combo==r,f=a&&l.seq==a&&l.level==o;(d||f)&&v._callbacks[e].splice(i,1),u.push(l)}return u}function a(e,t,n,a){v.stopCallback(t,t.target||t.srcElement,n,a)||!1===e(t,n)&&(d(t),f(t))}function r(e){"number"!=typeof e.which&&(e.which=e.keyCode);var t=u(e);if(t)return"keyup"==e.type&&k===t?void(k=!1):void v.handleKey(t,s(e),e)}function i(){clearTimeout(g),g=setTimeout(t,1e3)}function m(e,n,r,o){function l(n){a(r,n,e),"keyup"!==o&&(k=u(n)),setTimeout(t,10)}w[e]=0;for(var c=0;c<n.length;++c){var s=c+1===n.length,d=s?l:function(t){return function(){x=t,++w[e],i()}}(o||y(n[c+1]).action);h(n[c],d,o,e,c)}}function h(e,t,a,r,o){v._directMap[e+":"+a]=t,e=e.replace(/\s+/g," ");var i,l=e.split(" ");if(l.length>1)return void m(e,l,t,a);i=y(e,a),v._callbacks[i.key]=v._callbacks[i.key]||[],n(i.key,i.modifiers,{type:i.action},r,e,o),v._callbacks[i.key][r?"unshift":"push"]({callback:t,modifiers:i.modifiers,action:i.action,seq:r,level:o,combo:e})}var v=this;if(e=e||o,!(v instanceof b))return new b(e);v.target=e,v._callbacks={},v._directMap={};var g,w={},k=!1,E=!1,x=!1;v._handleKey=function(e,r,o){var i,l=n(e,r,o),u={},c=0,s=!1;for(i=0;i<l.length;++i)l[i].seq&&(c=Math.max(c,l[i].level));for(i=0;i<l.length;++i)if(l[i].seq){if(l[i].level!=c)continue;s=!0,u[l[i].seq]=1,a(l[i].callback,o,l[i].combo,l[i].seq)}else s||a(l[i].callback,o,l[i].combo);var d="keypress"==o.type&&E;o.type!=x||p(e)||d||t(u),E=s&&"keydown"==o.type},v._bindMultiple=function(e,t,n){for(var a=0;a<e.length;++a)h(e[a],t,n)},l(e,"keypress",r),l(e,"keydown",r),l(e,"keyup",r)}if(r){for(var w,k={8:"backspace",9:"tab",13:"enter",16:"shift",17:"ctrl",18:"alt",20:"capslock",27:"esc",32:"space",33:"pageup",34:"pagedown",35:"end",36:"home",37:"left",38:"up",39:"right",40:"down",45:"ins",46:"del",91:"meta",93:"meta",224:"meta"},E={106:"*",107:"+",109:"-",110:".",111:"/",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'"},x={"~":"`","!":"1","@":"2","#":"3",$:"4","%":"5","^":"6","&":"7","*":"8","(":"9",")":"0",_:"-","+":"=",":":";",'"':"'","<":",",">":".","?":"/","|":"\\"},S={option:"alt",command:"meta",return:"enter",escape:"esc",plus:"+",mod:/Mac|iPod|iPhone|iPad/.test(navigator.platform)?"meta":"ctrl"},_=1;_<20;++_)k[111+_]="f"+_;for(_=0;_<=9;++_)k[_+96]=_.toString();b.prototype.bind=function(e,t,n){var a=this;return e=e instanceof Array?e:[e],a._bindMultiple.call(a,e,t,n),a},b.prototype.unbind=function(e,t){var n=this;return n.bind.call(n,e,function(){},t)},b.prototype.trigger=function(e,t){var n=this;return n._directMap[e+":"+t]&&n._directMap[e+":"+t]({},e),n},b.prototype.reset=function(){var e=this;return e._callbacks={},e._directMap={},e},b.prototype.stopCallback=function(e,t){var n=this;return!((" "+t.className+" ").indexOf(" mousetrap ")>-1)&&(!g(t,n.target)&&("INPUT"==t.tagName||"SELECT"==t.tagName||"TEXTAREA"==t.tagName||t.isContentEditable))},b.prototype.handleKey=function(){var e=this;return e._handleKey.apply(e,arguments)},b.addKeycodes=function(e){for(var t in e)e.hasOwnProperty(t)&&(k[t]=e[t]);w=null},b.init=function(){var e=b(o);for(var t in e)"_"!==t.charAt(0)&&(b[t]=function(t){return function(){return e[t].apply(e,arguments)}}(t))},b.init(),r.Mousetrap=b,void 0!==e&&e.exports&&(e.exports=b),void 0!==(a=function(){return b}.call(t,n,t,e))&&(e.exports=a)}}("undefined"!=typeof window?window:null,"undefined"!=typeof window?document:null)},function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=n(0),o=a(r),i=n(1),l=a(i),u=function(e){var t=e.showTimestamp,n=e.elapsedTime,a=e.lyric,r=e.highlightIndex,i=e.showSyncButton,u=e.selectedIndex,c=e.onChangeSelectedIndex,s=e.onSyncLrcLRC,d=e.onOutput,f=(e.onDeleteTimestamp,e.onClearAlleTimestamp);return o.default.createElement("div",null,o.default.createElement("div",{className:"tool-bar"},o.default.createElement("button",{className:"tool-bar-button outputButton",onClick:function(){return d()}},"导出/编辑 LRC"),o.default.createElement("button",{className:"tool-bar-button",onClick:function(){confirm("我没有手滑，清空了时间轴不后悔")&&f()}},"清空时间标签")),o.default.createElement("button",{className:"sync-lyric "+(i?"is-visible":null),onClick:function(){return s()}},o.default.createElement("svg",{fill:"#ffffff",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg"},o.default.createElement("path",{d:"M0 0h24v24H0z",fill:"none"}),o.default.createElement("path",{d:"M10 8H8v4H4v2h4v4h2v-4h4v-2h-4zm4.5-1.92V7.9l2.5-.5V18h2V5z"}))),o.default.createElement("ul",{className:"lyric-list "+(t?"showtimestamp":null)},a.map(function(e,i){var s=["lyric"],d="";void 0!==e.time&&(d=l.default.timeToTag(e.time),s.push("timed")),i===u&&s.push("select"),i===r&&s.push("highlight");var f=Math.max(i-1,0),p=a[f].time;return p&&p>e.time&&s.push("error"),o.default.createElement("li",{key:e.key,className:s.join(" "),onClick:function(){return c(i)},"data-elapsedTime":t&&i===u?l.default.timeToTag(n):null},o.default.createElement("p",null,t?d:""," ",e.text))})))};t.default=u},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=n(0),r=function(e){return e&&e.__esModule?e:{default:e}}(a),o=function(){return r.default.createElement("div",{className:"app-drag-and-drop"},r.default.createElement("div",{className:"app-drag-and-drop-tip"},"释放鼠标，文件将会投喂给滚动姬"),r.default.createElement("div",{className:"app-drag-and-drop-icon"},r.default.createElement("svg",{fill:"#000000",height:"24",viewBox:"0 0 24 24",width:"24",xmlns:"http://www.w3.org/2000/svg"},r.default.createElement("path",{d:"M19 13h-6v6h-2v-6H5v-2h6V5h2v6h6v2z"}),r.default.createElement("path",{d:"M0 0h24v24H0z",fill:"none"}))))};t.default=o},function(e,t,n){"use strict";function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),l=n(0),u=function(e){return e&&e.__esModule?e:{default:e}}(l),c=function(e){function t(e){return a(this,t),r(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e))}return o(t,e),i(t,[{key:"componentWillUnmount",value:function(){this.props.onChangeFocus(!1)}},{key:"render",value:function(){var e=this;return u.default.createElement("div",{id:"app-editor",className:"app-editor app-main-content"},u.default.createElement("section",{className:"tool-bar"},u.default.createElement("button",{className:"tool-bar-button",onClick:function(){return e.props.onParse(e.textarea.value)}},"导入/打轴"),u.default.createElement("button",{className:"tool-bar-button",onClick:function(){return e.textarea.select()}},"全选"),u.default.createElement("a",{ref:function(t){return e.download=t},className:"tool-bar-button",href:"data:text/plain;charset=utf-8,"+this.props.lyricText.replace(/\n/g,"\r\n"),download:"download.lrc"},"下载")),u.default.createElement("textarea",{autoFocus:"autoFocus",className:"app-textarea",ref:function(t){return e.textarea=t},defaultValue:this.props.lyricText,onBlur:function(){e.props.onChangeFocus(!1);var t=e.textarea.value.replace(/\n/g,"\r\n");e.download.href="data:text/plain;charset=utf-8,"+encodeURIComponent(t)},onFocus:function(){return e.props.onChangeFocus(!0)},placeholder:"将音频，文本拖入本页面；或使用菜单里的「导入本地音频&歌词文本」按钮"}))}}]),t}(l.Component);t.default=c},function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=n(0),o=a(r),i=n(1),l=(a(i),function(e){var t=e.audioSrc,n=e.updateTime,a=e.setAudio,r=(e.showTimestamp,e.playbackRate),i=void 0===r?1:r,l=(e.textareaFocused,e.checkMode),u=void 0!==l&&l;return o.default.createElement("footer",{id:"app-footer",className:"app-footer"},o.default.createElement("div",{className:"foot-bar"},o.default.createElement("p",null,"播放倍速: ",i),o.default.createElement("p",null,"页面滚动模式：",u?"校对":"打轴")),o.default.createElement("audio",{ref:function(e){return a(e)},src:t,className:"app-audio",controls:"controls",onTimeUpdate:n,onError:function(e){confirm("音频地址加载失败，请确认音频url是否可用")&&(history.pushState({},document.title,window.location.href),window.location.href=e.target.src)}}))});t.default=l},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=n(0),r=function(e){return e&&e.__esModule?e:{default:e}}(a),o=function(e){var t=e.showSlide;return r.default.createElement("header",{id:"app-header",className:"app-header"},r.default.createElement("div",{className:"wrapper"},r.default.createElement("div",{className:"app-header-box"},r.default.createElement("span",{id:"app-title",className:"app-title"},"歌词滚动姬"),r.default.createElement("button",{className:"app-menu-button",onClick:function(){return t()}},r.default.createElement("svg",{fill:"#000000",height:"24",viewBox:"0 0 24 24",width:"24",xmlns:"http://www.w3.org/2000/svg"},r.default.createElement("path",{d:"M0 0h24v24H0z",fill:"none"}),r.default.createElement("path",{d:"M3 18h18v-2H3v2zm0-5h18v-2H3v2zm0-7v2h18V6H3z"}))))))};t.default=o},function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}var r=n(0),o=a(r),i=n(5),l=n(4),u=a(l);n(2),n(3),(0,i.render)(o.default.createElement(u.default,null),document.getElementById("react-root"));var c=document.createElement("a").style;c.cssText="position:sticky;position:-webkit-sticky;",-1===c.position.indexOf("sticky")&&(document.documentElement.className="no-csspositionsticky"),console.log("%c","padding:50px;line-height:100px;background:url('https://cloud.githubusercontent.com/assets/7829098/25065994/9d4855ea-224c-11e7-930e-7d82f5597e5e.png') no-repeat;"),console.log("欢迎在云音乐关注我，为阿卡琳增加一点存在感 Ki⭐️ra http://music.163.com/user/home?id=45441555"),console.log("欢迎反馈 star: https://github.com/hufan-Akari/LRC-MAKER"),console.log("欢迎反馈 BUG: https://github.com/hufan-Akari/LRC-MAKER/issues/new"),console.log("欢迎 fork: https://github.com/hufan-Akari/LRC-MAKER/fork"),console.log("欢迎发送 pull request: https://github.com/hufan-Akari/LRC-MAKER/pull/new/master");var s=new URL(window.location);"serviceWorker"in navigator&&null===s.searchParams.get("audiosrc")&&navigator.serviceWorker.register("./sw.js").then(function(e){console.log("ServiceWorker 成功注册(｡･ω･｡)ﾉ: ",e.scope)},function(e){console.log("ServiceWorker 注册失败ಥ_ಥ: ",e)})}]);